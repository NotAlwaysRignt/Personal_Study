### 区别 vim 正则与perl正则
vim 与 perl 都有强大的正则功能,但是它们在某些符号表示上区别不小,需要区分.下面在讲解时会分别讨论

### 分词
vim 中区分单词使用的是\<\> ,\<表示单词的左边界,\>匹配单词的右边界, 而perl 中使用\b匹配单词边界, \B匹配非单词边界
```bash
# vim 中匹配的是hello这个完整单词 helloAbc,AbcHello 此类不会被匹配
\<hello\>
```

### 非捕获组
perl 中使用 `(?:)` 来表示非捕获组
vim 中使用 `\%(\)`来表示非捕获组

### 环视
和perl稍有不同的是，vim中的环视和固化分组的模式的位置与perl不同。 例如，查找紧跟在 foo 之后的 bar，perl将模式写在环视的括号内， 而vim写在括号外的后面。

直白点说,顺序环视,子表达式会选择匹配左侧的文本(从左到右开始匹配,找到第一个),顺序否定环视(从右到左开始匹配,找到第一个),子表达式不匹配左侧文本,逆序环视,子表达式匹配右侧文本,逆序否定环视,子表达式不匹配左侧文本
| vim | Perl|   意义 |
|-----|-----|-------|
| \@= | (?= |  顺序环视
| \@! | (?! |  顺序否定环视
| \@<=|(?<= |  逆序环视
| \@<!|(?<! |  逆序否定环视
| \@> | (?> |  固化分组
|\%(atom\)|(?:|非捕获型括号

```bash
# Perl的写法
/(?<=foo)bar/
# vim的写法
/\(foo\)\@<=barvim
```

#### 使用举例
正则替换,使数字加上千分位,如
```bash
12345678999 -> 1,234,556,789
```
* 对于纯数字,vim中
```perl
# vim
:s/\(\d\)\@<=\(\(\d\{3\}\)\+$\)\@=/,/g
# 改成 perl 的格式
s/(?<=\d)(?=(\d{3})+$)/,/g
```
* 对于小数,如果小数后的位数小于等于5位
```bash
123455612312312312789.1234 -> 123,455,612,312,312,312,789.1234
```

```perl
# vim
s/\(\.\d\)\@<!\(\d\)\@<=\(\(\d\{3\}\)\+\>\)\@=/,/g
# perl
s/(?<!\.\d)(?<=\d)(?=(\d{3})+\b)/,/g
```

